{#
 # Homepage template
 # ---------------
 #}

{% extends "layouts/loginRequired" %}

{% block content %}

  <div id="app"></div>

  {# <div class="index-inspection">

    {% if currentUser.admin %}
      {% set inspections = craft.entries({ section: "inspections" }).order("dateCreated desc") %}
    {% else %}
      {% set inspections = craft.entries({ section: "inspections" }).relatedTo({ element: currentUser, field: 'mechanic' }).order("dateCreated desc") %}
    {% endif %}

    {% if inspections|length %}
    <div class="row">
      <div class="col inspection-list">
        <ul class="list-inpsections">
        {% for inspection in inspections %}
          {% set status = inspection.inspectionStatus %}
          <li class="{{  status != 'UpComing' ? 'in-active':'' }}">
            {% if status == 'UpComing' %}<a href="{{inspection.url}}" class="valign-wrapper">{% endif %}
              <div class="list-item title {% if status == 'UpComing' %}title-upComing{% endif %}">{{inspection.year}} {{inspection.make}} {{inspection.model}} {{inspection.series}} <span>- {{inspection.inspectionLocation}}</span></div>
              <div class="list-item date">{{inspection.inspectionDate|date('M d') }}</div>
              <div class="list-item status-{{ status|lower }}"><span>{{ status }}</span></div>
            {% if status == 'UpComing'  %}</a>{% endif %}
            {% if status != 'UpComing' %}
              <div class="list-item report"><a href="/report/{{inspection.id}}">Report</a></div>
            {% endif %}
          </li>
        {% endfor %}
        </ul>
      </div>
      <div class="col inspection-map">
        <div id="map"></div>
        <script>
        var map;

        function initMap() {
          map = new google.maps.Map(document.getElementById("map"), {
            center: {
              lat: 0,
              lng: 0
            },
            zoom: 0
          });

          var infowindow = new google.maps.InfoWindow({
            content: ''
          });

          var marker = new google.maps.Marker({
            position: uluru,
            map: map,
            title: 'Uluru (Ayers Rock)'
          });

          marker.addListener('click', function() {
            infowindow.open(map, marker);
          });
        }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key={{ craft.simpleMap.apiKey }}&callback=initMap" async defer></script>
      </div>
    </div>
    {% else %}
    <p class="center-align">No Inspections are currency assigned to you.</p>
    {% endif %}
  </div> #}

{% endblock %}
